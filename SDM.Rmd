---
title: "Bradypus"
author: "Brad Anderson"
date: "October 10, 2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r packages, include=FALSE}
library(dismo)
library(tidyverse)
library(sf)
library(sp)
library(raster)
library(rgdal)
library(maptools)


```

#Set Data Locations
```{r PARAMETERS and FILE LOCATIONS}

#Species Occurence Points
points <- read_csv("~/github/sdm/oakwoodland_points.csv")

#Climate Variables Folder
variable_path <- file.path("H:/SDM/CCMSM4_rcp85/2010-2039/")

#Soil
soils <- raster("H:/SDM/Soils/top_soils.tif")

#DEM
DEM <- raster("H:/SDM/DEM_usgs_2013/grdn35w121_13/w001001.adf")

```

#Import species occurence points.
```{r plot points}

#Plot Points
data(wrld_simpl)
plot(wrld_simpl, xlim=c(-121,-120), ylim=c(34,35), axes=TRUE, col="light yellow")
points(points$Long, points$Lat, col='red', cex=0.75)


```

#Import environmental data:
"For any particular study the layers should all have the same spatial extent, resolution, origin, and projection. If necessary, use functions like crop, extend, aggregate, resample, and projectRaster from the raster package."

"A RasterStack can be formed from separate files and/or from a few layers (’bands’) from a single file. In fact, a RasterStack is a collection of RasterLayer objects with the same spatial extent and resolution. In essence it is a list of RasterLayer objects. A RasterStack can easily be formed form a collection of files in different locations and these can be mixed with RasterLayer objects that only exist in memory."

```{r RasterStack & Define Projection}
#Call all .tif files from the storage location
variables <- list.files(variable_path, pattern='tif$', full.names=TRUE )

#Stack tif files into a RasterStack
predictors <- stack(variables)

#Define project (For some reason the BCM data comes unprojected)
crs(predictors) <- CRS('+init=epsg:3310')



```

```{r Data Prep}

#Re-assign Numbers in soils raster
soils_reclass <- reclassify(soils,rcl=c(120,150,NA))

#Reproject Soils to NAD83 CA Teale Albers
soils_proj <- projectRaster(soils_reclass, crs=crs(predictors))

#Reproject DEM to NAD83 CA Teale Albers
DEM_proj <- projectRaster(DEM, crs=crs(predictors))


```

```{r}

#Crop
predictors_crop <- crop(predictors, soils_proj)

predictors_resample <- resample(predictors_crop,DEM,method='ngb',progress='text')

```

Questions:
How do I import a shapefile? -I exported a comma delimited .txt file from Arc Pro and then turned into a .csv before importing into RStudio.

Should I do a different model run for each forecast time period? (ie 2010-2039,2040-2069,2070-2099)


DEM import and aspect/slope calculation
I could convert this into a TIF in order to include in the RasterStack?